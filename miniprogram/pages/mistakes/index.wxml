<!--错题本页面-->
<view class="container">
  <view class="header">
    <navigator url="/pages/profile/index" open-type="switchTab" class="back-button">
      <text class="back-text">返回</text>
    </navigator>
    <view class="header-title">错题本</view>
  </view>

  <view class="mistakes-header">
    <view class="mistakes-count">共收集 {{mistakeWords.length}} 个错误单词</view>
    <view class="dictation-button" bindtap="startDictation" wx:if="{{mistakeWords.length > 0}}">
      <text class="iconfont icon-play"></text> 听写错题
    </view>
  </view>

  <view class="word-list">
    <block wx:if="{{mistakeWords.length > 0}}">
      <view class="word-item" wx:for="{{mistakeWords}}" wx:key="word">
        <view class="word-content">
          <view class="word-text">{{item.word}}</view>
          <view class="word-phonetic">{{item.phonetic || ''}}</view>
          <view class="word-answer">您的答案: {{item.userAnswer || '未作答'}}</view>
        </view>
        <view class="word-actions">
          <view class="word-play" bindtap="playWord" data-word="{{item.word}}">
            <text class="iconfont icon-sound"></text>
          </view>
          <view class="word-delete" bindtap="removeWord" data-word="{{item.word}}">
            <text class="iconfont icon-delete"></text>
          </view>
        </view>
      </view>
    </block>
    <view wx:else class="empty-tip">
      <view class="empty-icon">📝</view>
      <view class="empty-text">暂无错题记录</view>
      <view class="empty-action" bindtap="goToHome">去听写单词</view>
    </view>
  </view>

  <view class="clear-button" bindtap="clearAllMistakes" wx:if="{{mistakeWords.length > 0}}">
    清空错题本
  </view>
</view> 