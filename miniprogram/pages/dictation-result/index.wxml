<!-- 听写结果页面 -->
<view class="result-container">
  <!-- 使用Vant导航栏组件 -->
  <van-nav-bar
    title="听写结果"
    left-text="返回"
    left-arrow
    fixed
    placeholder
    safe-area-inset-top
    bind:click-left="onBack"
    custom-class="custom-nav"
    title-class="nav-title"
  />

  <!-- 使用与record页面一致的结构 -->
  <view class="record-item">
    <view class="record-header">
      <view class="record-info">
        <view class="record-title-row">
          <text class="record-title">{{dictationTitle}}</text>
          <view class="record-image" wx:if="{{picUrl}}" catchtap="previewImage">
            <image src="{{picUrl}}" mode="aspectFill"></image>
          </view>
        </view>
        <view class="record-time">{{recordDate}}</view>
      </view>
    </view>
    <view class="record-content">
      <view class="record-stats">
        <view class="stat-item {{filterType === 'all' ? 'active-all' : ''}}" bindtap="toggleFilter" data-filter="all">
          <text class="stat-value {{filterType === 'all' ? 'active' : ''}}">{{correctCount + wrongCount}}</text>
          <text class="stat-label {{filterType === 'all' ? 'active' : ''}}">单词总数</text>
        </view>
        <view class="stat-item {{filterType === 'wrong' ? 'active-wrong' : ''}}" bindtap="toggleFilter" data-filter="wrong">
          <text class="stat-value wrong {{filterType === 'wrong' ? 'active' : ''}}">{{wrongCount}}</text>
          <text class="stat-label {{filterType === 'wrong' ? 'active' : ''}}">错误单词</text>
        </view>
        <view class="stat-item">
          <text class="stat-value">{{correctRate}}%</text>
          <text class="stat-label">正确率</text>
        </view>
      </view>
    </view>
  </view>
  
  <!-- 单词详情部分 -->
  <view class="details-section">
    <view class="section-title">单词详情 <text class="filter-hint">({{filterType === 'all' ? '全部单词' : '仅错误单词'}})</text></view>

    <view class="word-list">
      <block wx:for="{{filteredWordList}}" wx:key="word" wx:for-index="idx">
        <view class="word-item {{item.isCorrect ? 'correct' : 'wrong'}}">
          <view class="word-index">{{idx + 1}}.</view>
          <view class="word-text">{{item.word}}</view>
          <view wx:if="{{!item.isCorrect}}" class="word-answer">
            您的答案: {{item.userInput}}
          </view>
        </view>
      </block>
    </view>
  </view>
</view> 